<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Introduction To Microservices</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction_to_microservices">Introduction To Microservices</a>
<ul class="sectlevel2">
<li><a href="#_get_started">Get Started</a></li>
<li><a href="#_microservice_architecture">Microservice Architecture</a></li>
<li><a href="#_what_are_microservices">What are microservices?</a></li>
<li><a href="#_database_per_service_pattern">Database per Service Pattern</a></li>
</ul>
</li>
<li><a href="#_architecture">Architecture</a>
<ul class="sectlevel2">
<li><a href="#_stacksaga_in_high_level">StackSaga in High-level</a></li>
<li><a href="#key_processes_of_ecosystem">Key Processes of ecosystem</a></li>
<li><a href="#aggregator_architecture">Aggregator</a></li>
</ul>
</li>
<li><a href="#_developer_guide">Developer Guide</a>
<ul class="sectlevel2">
<li><a href="#_aggregator_introduction">Aggregator Introduction</a></li>
<li><a href="#creating_aggregator_class">Creating Aggregator Class</a></li>
<li><a href="#saga_serializable">Creating SagaSerializable Class for Aggregator</a></li>
<li><a href="#aggregator_mapper_implementation">Custom Aggregator Mapper</a></li>
<li><a href="#complex_aggrgator">Full Aggregate implementation.</a></li>
<li><a href="#saga_executors">Saga Executors.</a></li>
<li><a href="#query_executor">Query Executor.</a></li>
<li><a href="#command_executor">Command Executor.</a></li>
<li><a href="#revert_before_executor">Revert Before Executor.</a></li>
<li><a href="#revert_after_executor">Revert After Executor.</a></li>
<li><a href="#_processstack">ProcessStack</a></li>
<li><a href="#retryable_executor_exception">RetryableExecutorException</a></li>
<li><a href="#non_retryable_executor_exception">NonRetryableExecutorException</a></li>
<li><a href="#saga_exception_annotation">@SagaException Annotation </a></li>
<li><a href="#usage_of_exceptions">Usage of Executors[Q&amp;C] With Exceptions </a></li>
<li><a href="#_reverthintstore">RevertHintStore</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<!-- toc disabled -->
<div class="sect1">
<h2 id="_introduction_to_microservices">Introduction To Microservices</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_get_started">Get Started</h3>
<div class="paragraph">
<p>In this section, you will get the architecture of this framework.
Other than that, you will get what are the limitations you have to face when you are going to use microservice architecture and how overcome those difficulties by using StackSAGA framework.</p>
</div>
</div>
<div class="sect2">
<h3 id="_microservice_architecture">Microservice Architecture</h3>
<div class="paragraph">
<p>Before dive in to the framework, let&#8217;s have the basic idea of microservice architecture.
A microservice' architecture consists of a collection of small, autonomous services.
Each service is self-contained and should implement a single business capability within a bounded context.
A bounded context is a natural division within a business and provides an explicit boundary within which a domain model exists.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_are_microservices">What are microservices?</h3>
<div class="paragraph">
<p>Microservices are a modern approach to software whereby application code is delivered in small, manageable pieces, independent of others.
<a href="https://spring.io/microservices">Read more through spring microservices.</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_database_per_service_pattern">Database per Service Pattern</h3>
<div class="paragraph">
<p>One of the benefits of microservice architecture is that it lets us choose the technology stack per service.
For instance, we can decide to use a relational database for service A and opt for a NoSQL database for service B. This model lets the services manage domain data independently on a data store that best suites its data types and schema.
Further, it also lets the service scale its datastore on-demand and insulates it from the failures of other services.
However, at times a transaction can span across multiple services, and ensuring data consistency across the service database is a challenge.
In the next section, let us examine the challenge of distributed transaction management with an example.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_architecture">Architecture</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_stacksaga_in_high_level">StackSaga in High-level</h3>
<div class="paragraph">
<p>in the introduction, we got a clear idea of how microservice architecture works, and what are the challenges that we have to face when implementing the microservice. here, we are going to explain how the stack saga works together with typical microservice architecture. here we have demonstrated a spring boot microservice architecture and how the StackSaga framework provides the Saga execution coordinator (SEC) capabilities without bothering to the default architecture.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="resources/img/stack-saga-high-level-diagram.svg" alt="StackSaga High-level architecture" height="300">
</div>
</div>
<div class="paragraph">
<p>After adding stack saga in the microservice architecture, you can see there are some additional components in the high-level architecture diagram.
In the diagram, the gray color components and lines are related to the general microservice architecture and additional stacksaga related components and lines have been colored by green color.
Let&#8217;s discuss all the components and how they are interacted with general architecture.
When you use StackSaga, you have to provide the facilities to create a database in addition to the database that you use for each microservice.
This is also the same as the database per service design pattern.
A service group (multiple instances of one service) uses one database to store the events of the executions.
The only thing is newly added an extra schema.
If you like to use one database for all microservices for StackSaga, it doesn&#8217;t matter you can use one database as the event-store.
But as the best practice, one database per service is recommended.</p>
</div>
<div class="paragraph">
<p>As a summary of the image above, you can identify mainly 4 components as new.in the next image below you can see those new components how to interact with the general components.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>StackSaga Coordinator (A Library) and StackSaga Connector (A Library) is located in the individual services.</p>
</li>
<li>
<p>StackSaga Shield (A Library) is located in the API gateway.</p>
</li>
<li>
<p>StackSaga Server (A Standalone Application) is one separate unit that provides a dashboard.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="resources/img/architecture-stacksaga-products.drawio.svg" alt="StackSaga High-level architecture" height="300">
</div>
</div>
</div>
<div class="sect2">
<h3 id="key_processes_of_ecosystem">Key Processes of ecosystem</h3>
<div class="paragraph">
<p>To understand the relation of those components whole process can be summarised as follows.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Initialize the admin server with super admin.</p>
<div class="ulist">
<ul>
<li>
<p>As the first step, you have to create initialize the admin server.
See the initialization steps.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Register API gateways with admin server</p>
<div class="ulist">
<ul>
<li>
<p>To connect the StackSaga, your API gateway should provide an API-gateway-user credentials.
Therefore, super Admin should create a user with API gateway authorization (role).
After creating the API gateway user, the api gateway can be run because StackSaga Shield will check your credentials connecting with the admin server.
For this process, StackSaga server and StackSaga Shield were involved.
See the implementation to see more in detail.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Register each microservice with admin server.</p>
<div class="ulist">
<ul>
<li>
<p>To register the services in the admin server, the super admin or admin has to create a user for service with service privileges.
As a best-practice, the StackSaga team recommends you to create one user for one service group.
(A service group can have multiple instances, but the service names are the same.) For instance, order-service should have a service user called order-service-general-user.
And payment service should have a service user called payment-service-general-user.
At the start-up, the connector will verify your service credentials and let you the access to register and run the service.
For this process, StackSaga Server and StackSaga Connector were involved.
See the implementation to see more in detail.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Execute a transaction.</p>
<div class="ulist">
<ul>
<li>
<p>This is the main part that you are willing to see.
The request comes through the API gateway as usual, and the StackSaga coordinator will obtain the request data that you pass, and the coordinator will handle all the process and executions as you have guided the framework.
For this process only StackSaga coordinator was involved.
Read the implementation Or read how stack saga execution types work to see more, in detail.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Monitor transactions execution data.</p>
<div class="ulist">
<ul>
<li>
<p>To see the execution data, you should have to have a user account on the admin server.
If you are the super admin, the super admin can see all the details.
But as a best-practice, make sure to create a separate individual account for each user that wat to access the admin server to see the transaction data.
After login to the dashboard, you have to give the access path of the API gateway that you want to access the services.
You will be able to see the transaction data.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For this process, StackSaga server, StackSaga Shield and StackSaga Connector were involved.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="resources/img/architecture_stacksaga_how_admin_dashboard_access_stacksaga_endpoint.drawio.svg" alt="StackSaga High-level architecture" height="300">
</div>
</div>
</div>
<div class="sect2">
<h3 id="aggregator_architecture">Aggregator</h3>
<div class="paragraph">
<p>An <strong>aggregator</strong> is the main location that all the data should be kept for the entire transaction.
According to the StackSaga example, the entire process has set pf sub processes.
Create order, check user activeness, make payment, increase points and dispatch the order.
While those processes, you have to keep some data regarding the transaction.
For instance, the process is started from creating order.
After creating the order, you have a data to be kept.
As a response, you will get the order id.
You have to keep it, and you have to reuse it in your whole process.
After creating the order, you check the user activeness.
Then the user service is called and get the response of user&#8217;s activeness and keep that data as user is active at the time of the process started.
Likewise, each and every process will return you to data.
Those data you have to keep in one location.
That location called as the aggregator.
At the start, you have to declare the variables, and after doing each process, you can update the values in the aggregator.
On the other hand, we can say it is the data bucket that you bring the data to each executor.</p>
</div>
<div class="paragraph">
<p>Another special thing is that the aggregator is used as the key of your entire transaction.
That means the executors are identified by the aggregator class that you use.
Because your entire transaction can have only one aggregator.
Therefore, the aggregator class is used in each and every time by representing the transaction.
For instance, according to the StackSaga example, the place order is the entire process.
It contains many sub processes like create order, check user ect.
Each process is introduced to the framework by using executors.
So, for each process have separate executors.
When you create each executor, you should mention what ks the aggregator that you want to use in that executor.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can store/update the data in the aggregator by using the process execution only (doProcess()).
If you want to keep some metadata while your revert/compensation processes, you can use the hint-store that the framework provides.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="aggregator_and_executors">Aggregator and Executors</h4>
<div class="paragraph">
<p>Here you can see all the sub sets of processes are connected with the aggregator.
Each sub process wants the aggregator to get run.
That means the data that executor wants to execute the sub process, is located at the aggregator.
If some executor is not linked with the aggregator, it is not configured in the framework.
You can see the executor-introduction or the real implementation of the example to learn more about the executors.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="resources/img/stack-saga-e-store-example-aggregator-and-executors.drawio.svg" alt="StackSaga Aggregator And Executors" height="400">
</div>
</div>
</div>
<div class="sect3">
<h4 id="aggregator_usage_with_executor">How the Aggregator is used through the Executors</h4>
<div class="imageblock">
<div class="content">
<img src="resources/img/stack-saga-e-store-example-aggregator-state.drawio.svg" alt="StackSaga Aggregator And Executors" height="300">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_developer_guide">Developer Guide</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_aggregator_introduction">Aggregator Introduction</h3>
<div class="paragraph">
<p>Here we are going to discuss how we can create an Aggregator and what are the configurations of the Aggregator.</p>
</div>
</div>
<div class="sect2">
<h3 id="creating_aggregator_class">Creating Aggregator Class</h3>
<div class="paragraph">
<p>The aggregator<sup><a href="#aggregator_architecture">ref</a></sup>  class does represent your business domain, and it is the container for carrying out the data for the executors.
In side of the aggregator class, you should provide all the data regarding your entire transaction.</p>
</div>
<div class="paragraph">
<p>example: Just think you are will be to make a transaction for place and order by using StackSaga. then you have to create an Aggregator class to put the data that you want to while the whole process. you can create an Aggregator class called <code>PlaceOrderAggregator</code> and provide all the data that you want like <em>username, orderId, transactionId</em> etc&#8230;&#8203; and also you might want to add complex data structure inside that aggregate class like <em>list of items</em> regarding the items that the customer&#8217;s order. then you have to create a java pojo as well. as a best practice, the framework suggests you to create all related pojo classes in the same package of the Aggregator class or as the inner classes of the Aggregator class.</p>
</div>
<div class="paragraph">
<p>To be an aggregator in StackSaga, Mainly, The aggregator class should be extended from <code>org.stacksaga.SagaAggregate</code> class and also the aggregator class should be annotated with <code>org.stacksaga.core.annotation.Aggregator</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
All the classes (main aggregator class and other classes that are used inside it) that are used for the SagaAggregator should be implemented by the <code>java.io.Serializable</code> class.
By default, The main aggregator class is Serializable due to the fact that it is implemented from the <code>SagaAggregate</code> class. <a href="#complex_aggrgator">See complex object implementation</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s see how it is created in StackSaga project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><span style="color:#007">@Aggregator</span>(<i class="conum" data-value="1"></i><b>(1)</b>
        version = <span style="color:#007">@AggregatorVersion</span>(major = <span style="color:#00D">1</span>, minor = <span style="color:#00D">0</span>, patch = <span style="color:#00D">1</span>), <i class="conum" data-value="2"></i><b>(2)</b>
        idPrefix = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">po</span><span style="color:#710">&quot;</span></span>, <i class="conum" data-value="3"></i><b>(3)</b>
        name = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">PlaceOrderAggregator</span><span style="color:#710">&quot;</span></span>, <i class="conum" data-value="4"></i><b>(4)</b>
        sagaSerializable = PlaceOrderAggregatorSample.class <i class="conum" data-value="5"></i><b>(5)</b>
)
<span style="color:#007">@Getter</span> <i class="conum" data-value="6"></i><b>(6)</b>
<span style="color:#007">@Setter</span> <i class="conum" data-value="7"></i><b>(7)</b>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">PlaceOrderAggregator</span> <span style="color:#088;font-weight:bold">extends</span> SagaAggregate  { <i class="conum" data-value="8"></i><b>(8)</b>

    <i class="conum" data-value="9"></i><b>(9)</b>
    <span style="color:#088;font-weight:bold">public</span> PlaceOrderAggregator() {
        <span style="color:#950">super</span>(PlaceOrderAggregator.class);
    }

    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> orderId;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> username;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">int</span> isActive;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The aggregator class should be annotated with <code>org.stacksaga.core.annotation.Aggregator</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><strong>version</strong> will be used for the identification of the aggregator versioning. it is helpful for the <strong>event-upper-casting</strong> and <strong>event-down-casting</strong>. <code>org.stacksaga.core.annotation.AggregatorVersion</code> annotation help you to provide the version of the aggregator.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><strong>idPrefix</strong> will be used as the prefix of the transaction id. you can give a prefix according to the aggregator name.
The maximum length of the prefix is 4 characters.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><strong>name</strong> The name of the aggregator. this is used for identification of the aggregator by the name.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><strong>sagaSerializable</strong> is used for pre-serialization of the samples of the aggregator. <a href="#saga_serializable">see the implementation</a></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><strong>Getter</strong> you can create getters as usual for the aggregator.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td><strong>Setter</strong> you can create setters as usual for the aggregator.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>The aggregator class should be implemented from the <code>org.stacksaga.SagaAggregate</code> class.
It provides the shep of aggregator in the framework.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>The aggregator class should have the default constructor and also the <strong>super()</strong> method should be called by passing the same aggregator class.</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The name of the aggregator should be the same forever.
Because, all the event-store data is mapped with the aggregator name.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Due to the fact that the aggregator name is configured by an attribute, you can change the package of the aggregator class anytime.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In StackSaga, The aggregator is not a spring bean at all.
Therefore, it is not necessary to have inside the <strong>component scan</strong> area.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="saga_serializable">Creating SagaSerializable Class for Aggregator</h3>
<div class="paragraph">
<p>The <code>SagaSerializable</code> class provides you a method called <code>&lt;T&gt; getSamples()</code> to provide the sample array of objects of your real Aggregator. for each aggregator class that you made should have a separate implementation of <code>SagaSerializable</code> for validating the sample object before the application is started. that process ensures that your aggregator object will not face a serialization error while the transactions are being processed in the production.</p>
</div>
<div class="paragraph">
<p>you can see a sample SagaSerializable <code>(PlaceOrderAggregatorSample.class)</code> implementation of the PlaceOrderAggregator.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">PlaceOrderAggregatorSample</span> <span style="color:#088;font-weight:bold">implements</span> SagaSerializable&lt;PlaceOrderAggregator&gt; { <i class="conum" data-value="1"></i><b>(1)</b>
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> PlaceOrderAggregator<span style="color:#339;font-weight:bold">[]</span> getSamples() {
        <span style="color:#777">//samples objects for the PlaceOrderAggregator</span>

        <span style="color:#777">//sample-1</span>
        PlaceOrderAggregator aggregator1 = <span style="color:#080;font-weight:bold">new</span> PlaceOrderAggregator();
        aggregator1.setOrderId(<span style="color:#0a8;font-weight:bold">UUID</span>.randomUUID().toString());

        <span style="color:#777">//sample-1</span>
        PlaceOrderAggregator aggregator2 = <span style="color:#080;font-weight:bold">new</span> PlaceOrderAggregator();
        aggregator2.setOrderId(<span style="color:#0a8;font-weight:bold">UUID</span>.randomUUID().toString());
        aggregator2.setUsername(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mafei</span><span style="color:#710">&quot;</span></span>);

        <i class="conum" data-value="2"></i><b>(2)</b>
        <span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">new</span> PlaceOrderAggregator<span style="color:#339;font-weight:bold">[]</span>{
                aggregator1,
                aggregator2,
        };
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Implement your custom <code>PlaceOrderAggregatorSample</code> from the <code>SagaSerializable&lt;T&gt;</code>.
The generic type should be the aggregator that you wish to check the sample object.
According to the example, the Type is <code>PlaceOrderAggregator</code>.
Then you will have a method for providing the sample objects for that given type.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Rerun your initialized sample objects by creating a new array for the validation process.</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Make sure to keep the default constructor for each SagaSerializable implementation.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="aggregator_mapper_implementation">Custom Aggregator Mapper</h3>
<div class="paragraph">
<p>You can decide your custom configurations of the objectMapper for your target <a href="#creating_aggregator_class">Aggregator</a>.
By default, the system will use an <a href="https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html"><code>ObjectMapper</code></a>
that the framework provides for the aggregator serialization and deserialization.
But if you want to customize the objectMapper for your target aggregator, you can create and provide a custom objectMapper object for the target aggregator by using <code>SagaAggregatorMapperProvider</code> implementation.
Then The framework will use the custom Aggregator Mapper that you provided to the target aggregator.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The class should be a Spring bean (Annotate with <code>@Component</code>).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here you can see a custom implementation of the <code>AggregatorMapper</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><span style="color:#007">@Component</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">PlaceOrderAggregatorJsonMapper</span> <span style="color:#088;font-weight:bold">implements</span> SagaAggregatorMapperProvider  {<i class="conum" data-value="2"></i><b>(2)</b>

    <span style="color:#088;font-weight:bold">private</span> <span style="color:#088;font-weight:bold">final</span> ObjectMapper objectMapper;

    <span style="color:#088;font-weight:bold">public</span> PlaceOrderAggregatorJsonMapper() {
        <span style="color:#950">this</span>.objectMapper = <span style="color:#080;font-weight:bold">new</span> ObjectMapper(); <i class="conum" data-value="3"></i><b>(3)</b>
        <span style="color:#777">//your custom object mapper configurations</span>
        ...
    }

    <i class="conum" data-value="4"></i><b>(4)</b>
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> SagaAggregatorMapper getSagaAggregatorMapper() {
        <span style="color:#080;font-weight:bold">return</span> SagaAggregatorMapper.Builder.build(
                <span style="color:#950">this</span>.objectMapper
        );<i class="conum" data-value="5"></i><b>(5)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><strong>@Component</strong>: Mark your custom object mapper implementation as a Spring bean.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><strong>SagaAggregatorMapperProvider</strong>: Implement by the <code>SagaAggregatorMapperProvider</code> interface.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Initialize and set your custom configurations for the <code>objectMapper</code> object that you provide for the target aggregator.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Override the method for providing the <code>SagaAggregatorMapper</code> object.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><strong>SagaAggregatorMapper.Builder</strong>: The builder class provides the methods for building <code>SagaAggregatorMapper</code> object.
you can build <code>SagaAggregatorMapper</code> object by adding your custom configured objectMapper object and return it back.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>SagaAggregatorMapper.Builder</code> class can have several build methods with several mapper types other than the <code>ObjectMapper</code>.
Currently, StackSaga framework only supports <code>ObjectMapper</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can provide your custom object <code>SagaAggregatorMapperProvider</code> class to the target Aggregator like below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><span style="color:#007">@Aggregator</span>(
        version = <span style="color:#007">@AggregatorVersion</span>(major = <span style="color:#00D">1</span>, minor = <span style="color:#00D">0</span>, patch = <span style="color:#00D">1</span>),
        idPrefix = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">po</span><span style="color:#710">&quot;</span></span>,
        name = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">PlaceOrderAggregator</span><span style="color:#710">&quot;</span></span>,
        sagaSerializable = PlaceOrderAggregatorSample.class,
        mapper = PlaceOrderAggregatorJsonMapper.class <i class="conum" data-value="1"></i><b>(1)</b>
)
<span style="color:#007">@Getter</span>
<span style="color:#007">@Setter</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">PlaceOrderAggregator</span> <span style="color:#088;font-weight:bold">extends</span> SagaAggregate {

    <span style="color:#088;font-weight:bold">public</span> PlaceOrderAggregator() {
        <span style="color:#950">super</span>(PlaceOrderAggregator.class);
    }
    ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><strong>mapper</strong>: provide your custom aggregator mapper provider class.</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="complex_aggrgator">Full Aggregate implementation.</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><span style="color:#777">//Aggregtor Classs</span>
<span style="color:#007">@Aggregator</span>(
        version = <span style="color:#007">@AggregatorVersion</span>(major = <span style="color:#00D">1</span>, minor = <span style="color:#00D">0</span>, patch = <span style="color:#00D">1</span>),
        idPrefix = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">po</span><span style="color:#710">&quot;</span></span>,
        name = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">PlaceOrderAggregator</span><span style="color:#710">&quot;</span></span>,
        sagaSerializable = PlaceOrderAggregatorSample.class
)
<span style="color:#007">@Getter</span>
<span style="color:#007">@Setter</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">PlaceOrderAggregator</span> <span style="color:#088;font-weight:bold">extends</span> SagaAggregate {

    <span style="color:#088;font-weight:bold">public</span> PlaceOrderAggregator() {
        <span style="color:#950">super</span>(PlaceOrderAggregator.class);
    }

    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> orderId;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> username;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">int</span> isActive;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">List</span>&lt;ItemDetail&gt; itemDetails = <span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">ArrayList</span>&lt;&gt;();
}

<span style="color:#777">//Pojo Class for Item Details</span>
<span style="color:#007">@Getter</span>
<span style="color:#007">@Setter</span>
<span style="color:#007">@Builder</span>
<span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">ItemDetail</span> <span style="color:#088;font-weight:bold">implements</span> <span style="color:#0a8;font-weight:bold">Serializable</span> { <i class="conum" data-value="1"></i><b>(1)</b>
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> itemName;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">int</span> qty;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">double</span> price;
}

<span style="color:#777">//Saga Serializable Class</span>
<span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">PlaceOrderAggregatorSample</span> <span style="color:#088;font-weight:bold">implements</span> SagaSerializable&lt;PlaceOrderAggregator&gt; {
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> PlaceOrderAggregator<span style="color:#339;font-weight:bold">[]</span> getSamples() {
        <span style="color:#777">//sample-1</span>
        PlaceOrderAggregator aggregator1 = <span style="color:#080;font-weight:bold">new</span> PlaceOrderAggregator();
        aggregator1.setOrderId(<span style="color:#0a8;font-weight:bold">UUID</span>.randomUUID().toString());
        <span style="color:#777">//sample-1</span>
        PlaceOrderAggregator aggregator2 = <span style="color:#080;font-weight:bold">new</span> PlaceOrderAggregator();
        aggregator2.setOrderId(<span style="color:#0a8;font-weight:bold">UUID</span>.randomUUID().toString());
        aggregator2.setUsername(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mafei</span><span style="color:#710">&quot;</span></span>);
        <span style="color:#777">//sample-3</span>
        PlaceOrderAggregator aggregator3 = <span style="color:#080;font-weight:bold">new</span> PlaceOrderAggregator();
        aggregator3.getItemDetails().add(
                ItemDetail
                        .builder()
                        .itemName(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Item-01</span><span style="color:#710">&quot;</span></span>)
                        .price(<span style="color:#60E">10.50</span>)
                        .qty(<span style="color:#00D">2</span>)
                        .build()
        );

        <span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">new</span> PlaceOrderAggregator<span style="color:#339;font-weight:bold">[]</span>{
                aggregator1,
                aggregator2,
                aggregator3,
        };
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>It is necessary to be implemented by the  <code>Serializable</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="saga_executors">Saga Executors.</h3>
<div class="paragraph">
<p>According to the saga design pattern, sub processes (atomic executions) can have two executions called process execution and compensation execution.
And those executions you van create as the methods in your application anywhere.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong><a href="#query_executor">Query executors</a></strong>: If some atomic process has no compensation (query execution), that kind of process is used in a query executor.</p>
</li>
<li>
<p><strong><a href="#command_executor">Command executors</a></strong>: If some atomic process has a compensation (command execution), that kind of process is used in a command executor.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Revert executors</strong>: For the compensation process of the command executor it can be used other sub processes if you need.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><strong><a href="#revert_before_executor">Revert Before Executors</a></strong>: If you want to execute an atomic process before executing the main revert process, you can create a Revert-Before-Executor.</p>
</li>
<li>
<p><strong><a href="#revert_after_executor">Revert After Executors</a></strong>: If you want to execute an atomic process after executing the main revert process, you can create a Revert-Before-Executor.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="query_executor">Query Executor.</h3>
<div class="paragraph">
<p>You can create any number of your custom Query-Executors regarding the Aggregator.
Here you can see how you can create a Query-Executor for your <code><a href="#creating_aggregator_class">PlaceOrderAggregator</a></code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><i class="conum" data-value="1"></i><b>(1)</b>
<span style="color:#007">@SagaExecutor</span>(
        executeFor = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">user-service</span><span style="color:#710">&quot;</span></span>, <i class="conum" data-value="2"></i><b>(2)</b>
        liveCheck = <span style="color:#069">true</span>, <i class="conum" data-value="3"></i><b>(3)</b>
        value = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">CheckUserExecutor</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="4"></i><b>(4)</b>
)
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">CheckUserExecutor</span> <span style="color:#088;font-weight:bold">implements</span> QueryExecutor&lt;PlaceOrderAggregator&gt; { <i class="conum" data-value="5"></i><b>(5)</b>

    <i class="conum" data-value="6"></i><b>(6)</b>
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> ProcessStepManager&lt;PlaceOrderAggregator&gt; doProcess(
            ProcessStack processStack,
            PlaceOrderAggregator aggregator,
            ProcessStepManagerUtil&lt;PlaceOrderAggregator&gt; stepManagerUtil
    ) <span style="color:#088;font-weight:bold">throws</span> RetryableExecutorException, NonRetryableExecutorException {
        <span style="color:#777">//execute the service and check the conndtion.</span>

        <span style="color:#777">//return or throw </span><i class="conum" data-value="7"></i><b>(7)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><strong>@SagaExecutor</strong>: annotate your query executor with <code>@org.stacksaga.annotation.SagaExecutor</code> annotation.
The annotation provides the spring bean capabilities and also another metadata for the StackSaga framework.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><strong>executeFor</strong>: The name of the service that particular executor is going to be connected. it can be a service name of another service. if the service is spring boot service, make sure to keep the application name as its. because it will be helpful for the retry process.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><strong>liveCheck</strong>: When the retry process is executed, liveCheck is considered by the engine. if the target service is a spring boot service or registered service with the service registry, the availability is checked before executing the retry by the StackSaga engine.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><strong>value</strong>: The bean name of the executor.
The executor is identified with this value by StackSaga engine. after configuring the bean name, it cannot be changed at all. if you want to the class package, it does not matter without changing the configured name.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><strong>QueryExecutor&lt;T&gt;</strong> IF the executor is Query one, The executor should be implemented by <code>org.stacksaga.executor.QueryExecutor&lt;T&gt;</code>. <code>T</code> should be the target Aggregator class for the domain.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Override the <code>doProcess()</code>  method and put your execution code block that should be executed when the executor is executed by the StackSaga engine.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Finally, you can either return the next executor with the method that provides by the <code>ProcessStepManager</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="command_executor">Command Executor.</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><i class="conum" data-value="1"></i><b>(1)</b>
<span style="color:#007">@SagaExecutor</span>(
        executeFor = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">delivery-service</span><span style="color:#710">&quot;</span></span>, <i class="conum" data-value="2"></i><b>(2)</b>
        liveCheck = <span style="color:#069">true</span>, <i class="conum" data-value="3"></i><b>(3)</b>
        value = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">DispatchOrderExecutor</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="4"></i><b>(4)</b>
)
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">DispatchOrderExecutor</span> <span style="color:#088;font-weight:bold">implements</span> CommandExecutor&lt;PlaceOrderAggregator&gt; { <i class="conum" data-value="5"></i><b>(5)</b>

    <i class="conum" data-value="6"></i><b>(6)</b>
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> ProcessStepManager&lt;PlaceOrderAggregator&gt; doProcess(
            ProcessStack processStack, <i class="conum" data-value="7"></i><b>(7)</b>
            PlaceOrderAggregator aggregator, <i class="conum" data-value="8"></i><b>(8)</b>
            ProcessStepManagerUtil&lt;PlaceOrderAggregator&gt; stepManager <i class="conum" data-value="9"></i><b>(9)</b>
    ) <span style="color:#088;font-weight:bold">throws</span> RetryableExecutorException, NonRetryableExecutorException {
        <span style="color:#777">//execute the service and check the conndtion.</span>
        ...
        <span style="color:#777">//return or throw </span><i class="conum" data-value="10"></i><b>(10)</b>
    }

    <span style="color:#007">@RevertBefore</span>(startFrom = DispatchRevertNotifierExecutor.class)  <i class="conum" data-value="11"></i><b>(11)</b>
    <span style="color:#007">@RevertAfter</span>(startFrom = DispatchRevertCompleteLogExecutor.class) <i class="conum" data-value="12"></i><b>(12)</b>
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> doRevert(
            ProcessStack processStack,<i class="conum" data-value="13"></i><b>(13)</b>
            NonRetryableExecutorException nonRetryableExecutorException,<i class="conum" data-value="14"></i><b>(14)</b>
            PlaceOrderAggregator aggregator, <i class="conum" data-value="15"></i><b>(15)</b>
            RevertHintStore revertHintStore <i class="conum" data-value="16"></i><b>(16)</b>
    ) <span style="color:#088;font-weight:bold">throws</span> RetryableExecutorException {
        <span style="color:#777">//call the atomic process that you want to as the compensation,</span>
        ...
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><strong>@SagaExecutor</strong>: annotate your query executor with <code>@org.stacksaga.annotation.SagaExecutor</code> annotation.
The annotation provides the spring bean capabilities and also another metadata for the StackSaga framework.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><strong>executeFor</strong>: The name of the service that particular executor is going to be connected. it can be a service name of another service. if the service is spring boot service, make sure to keep the application name as its. because it will be helpful for the retry process.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><strong>liveCheck</strong>: When the retry process is executed, liveCheck is considered by the engine. if the target service is a spring boot service or registered service with the service registry, the availability is checked before executing the retry by the StackSaga engine.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><strong>value</strong>: The bean name of the executor.
The executor is identified with this value by StackSaga engine. after configuring the bean name, it cannot be changed at all. if you want to the class package, it does not matter without changing the configured name.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><strong>CommandExecutor&lt;T&gt;</strong> IF the executor is command one, The executor should be implemented by <code>org.stacksaga.executor.CommandExecutor&lt;T&gt;</code>. <code>T</code> should be the target Aggregator class for the domain.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Override the <code>doProcess()</code>  method and put your execution code block that should be executed when the executor is executed by the StackSaga engine.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td><strong>ProcessStack</strong> Object provides all the executed execution until the process so far.
It will help for gen an idea about the execution history.
And also you can get the decision of the execution base on the execution history.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td><strong>PlaceOrderAggregator</strong>: The current aggregator state.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td><strong>ProcessStepManagerUtil&lt;T&gt;</strong>: This object provides the methods for giving the navigation to the engine regarding the next step. it can be another executor (command or query) or a process completion.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>Inside the method scope, you can provide the execution that should be executed when the StackSaga engine executes.
And finally you can navigate to the next step by using the <code>ProcessStepManagerUtil</code> object.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td><strong>@RevertBefore</strong>: If the executor has any revert-before-executors, you can mention that executor class with <code>@RevertBefore</code> annotation.
According to the example, the revert before execution will be started from <a href="#revert_before_executor">DispatchRevertNotifierExecutor</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td><strong>@RevertAfter</strong>: If the executor has any revert-after-executors, you can mention that executor class with <code>@RevertAfter</code> annotation.
According to the example, the revert after execution will be started from <a href="#revert_after_executor">DispatchRevertCompleteLogExecutor</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="13"></i><b>13</b></td>
<td><strong>ProcessStack</strong> The final process stack that was when the final execution was executed.</td>
</tr>
<tr>
<td><i class="conum" data-value="14"></i><b>14</b></td>
<td><strong>NonRetryableExecutorException</strong> The exception that caused the transition process stopping to forward.</td>
</tr>
<tr>
<td><i class="conum" data-value="15"></i><b>15</b></td>
<td><strong>PlaceOrderAggregator</strong> The final aggregator state when the NonRetryableExecutorException is thrown.</td>
</tr>
<tr>
<td><i class="conum" data-value="16"></i><b>16</b></td>
<td><strong>RevertHintStore</strong> If you want to add some data to the backward process, you can use the <code>RevertHintStore</code> to put the data.</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="revert_before_executor">Revert Before Executor.</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><i class="conum" data-value="1"></i><b>(1)</b>
<span style="color:#007">@SagaExecutor</span>(
        executeFor = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">delivery-service</span><span style="color:#710">&quot;</span></span>,<i class="conum" data-value="2"></i><b>(2)</b>
        liveCheck = <span style="color:#069">true</span>,<i class="conum" data-value="3"></i><b>(3)</b>
        value = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">DispatchRevertNotifierExecutor</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="4"></i><b>(4)</b>
)
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">DispatchRevertNotifierExecutor</span> <span style="color:#088;font-weight:bold">implements</span> RevertBeforeExecutor&lt;PlaceOrderAggregator, DispatchOrderExecutor&gt; {<i class="conum" data-value="5"></i><b>(5)</b>

    <i class="conum" data-value="6"></i><b>(6)</b>
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> RevertBeforeStepManager&lt;PlaceOrderAggregator, DispatchOrderExecutor&gt; doProcess(
            PlaceOrderAggregator aggregator,<i class="conum" data-value="7"></i><b>(7)</b>
            ProcessStack previousProcessStack,<i class="conum" data-value="8"></i><b>(8)</b>
            NonRetryableExecutorException processException,<i class="conum" data-value="9"></i><b>(9)</b>
            RevertHintStore revertHintStore,<i class="conum" data-value="10"></i><b>(10)</b>
            RevertBeforeStepManagerUtil&lt;PlaceOrderAggregator, DispatchOrderExecutor&gt; revertStepManagerUtil <i class="conum" data-value="11"></i><b>(11)</b>
    ) <span style="color:#088;font-weight:bold">throws</span> RetryableExecutorException { <i class="conum" data-value="12"></i><b>(12)</b>
        <span style="color:#080;font-weight:bold">return</span> revertStepManagerUtil.next(NextBeforExecutor.class); <i class="conum" data-value="13"></i><b>(13)</b>
        <span style="color:#777">//or</span>
        <span style="color:#080;font-weight:bold">return</span> revertStepManagerUtil.complete(); <i class="conum" data-value="14"></i><b>(14)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><strong>@SagaExecutor</strong>: annotate your query executor with <code>@org.stacksaga.annotation.SagaExecutor</code> annotation.
The annotation provides the spring bean capabilities and also another metadata for the StackSaga framework.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><strong>executeFor</strong>: The name of the service that particular executor is going to be connected. it can be a service name of another service. if the service is spring boot service, make sure to keep the application name as its. because it will be helpful for the retry process.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><strong>liveCheck</strong>: When the retry process is executed, liveCheck is considered by the engine. if the target service is a spring boot service or registered service with the service registry, the availability is checked before executing the retry by the StackSaga engine.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><strong>value</strong>: The bean name of the executor.
The executor is identified with this value by StackSaga engine. after configuring the bean name, it cannot be changed at all. if you want to the class package, it does not matter without changing the configured name.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><strong>RevertBeforeExecutor&lt;A, E&gt;</strong>: The Revert Before Executor should be implemented from the <code>RevertBeforeExecutor&lt;A,E&gt;</code>.
Generic <strong>A</strong> is the aggregator.
Generic <strong>E</strong> is the <a href="#command_executor">command-executor</a> of the given aggregator as the Generic <strong>A</strong>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Override the <code>doProcess()</code> method that <code>RevertBeforeExecutor</code> provides.
That is the method is executed by the StackSaga engine.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td><strong>PlaceOrderAggregator</strong>: The final aggregator state when the process exception is thrown.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td><strong>ProcessStack</strong>: The final process stack when the process exception is thrown.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td><strong>NonRetryableExecutorException</strong>:The process-exception that was thrown by the last executor.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td><strong>RevertHintStore</strong> If you want to add some data to the backward process, you can use the <code>RevertHintStore</code> to put the data as container.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td><strong>RevertBeforeStepManagerUtil&lt;A, E&gt;</strong>: This object provides the methods for giving the navigation to the engine regarding the next step. it can be another revert-before-executor or a revert-before completion.</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td><strong>RetryableExecutorException</strong>: If the revert before execution is failed due to a retryable exception, you can provide that by warping with <code>RetryableExecutorException</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="13"></i><b>13</b></td>
<td><strong>next()</strong>: You can provide (only if you have) the next revert-before-executor with <code>revertStepManagerUtil.next()</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="14"></i><b>14</b></td>
<td><strong>complete()</strong>: If you don&#8217;t have any revert-before-executor to be executed as next regarding the command-executor, you can return <code>revertStepManagerUtil.complete()</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="revert_after_executor">Revert After Executor.</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><i class="conum" data-value="1"></i><b>(1)</b>
<span style="color:#007">@SagaExecutor</span>(
        executeFor = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">delivery-service</span><span style="color:#710">&quot;</span></span>,<i class="conum" data-value="2"></i><b>(2)</b>
        liveCheck = <span style="color:#069">true</span>,<i class="conum" data-value="3"></i><b>(3)</b>
        value = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">DispatchRevertNotifierExecutor</span><span style="color:#710">&quot;</span></span> <i class="conum" data-value="4"></i><b>(4)</b>
)
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">DispatchRevertCompleteLogExecutor</span> <span style="color:#088;font-weight:bold">implements</span> RevertAfterExecutor&lt;PlaceOrderAggregator, DispatchOrderExecutor&gt; {<i class="conum" data-value="5"></i><b>(5)</b>

    <i class="conum" data-value="6"></i><b>(6)</b>
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> RevertAfterStepManager&lt;PlaceOrderAggregator, DispatchOrderExecutor&gt; doProcess(
            PlaceOrderAggregator aggregator,<i class="conum" data-value="7"></i><b>(7)</b>
            ProcessStack previousProcessStack,<i class="conum" data-value="8"></i><b>(8)</b>
            NonRetryableExecutorException processException,<i class="conum" data-value="9"></i><b>(9)</b>
            RevertHintStore revertHintStore,<i class="conum" data-value="10"></i><b>(10)</b>
            RevertAfterStepManagerUtil&lt;PlaceOrderAggregator, DispatchOrderExecutor&gt; revertStepManagerUtil <i class="conum" data-value="11"></i><b>(11)</b>
    ) <span style="color:#088;font-weight:bold">throws</span> RetryableExecutorException { <i class="conum" data-value="12"></i><b>(12)</b>
        <span style="color:#080;font-weight:bold">return</span> revertStepManagerUtil.next(NextAfterExecutor.class); <i class="conum" data-value="13"></i><b>(13)</b>
        <span style="color:#777">//or</span>
        <span style="color:#080;font-weight:bold">return</span> revertStepManagerUtil.complete(); <i class="conum" data-value="14"></i><b>(14)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><strong>@SagaExecutor</strong>: annotate your query executor with <code>@org.stacksaga.annotation.SagaExecutor</code> annotation.
The annotation provides the spring bean capabilities and also another metadata for the StackSaga framework.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><strong>executeFor</strong>: The name of the service that particular executor is going to be connected. it can be a service name of another service. if the service is spring boot service, make sure to keep the application name as its. because it will be helpful for the retry process.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><strong>liveCheck</strong>: When the retry process is executed, liveCheck is considered by the engine. if the target service is a spring boot service or registered service with the service registry, the availability is checked before executing the retry by the StackSaga engine.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><strong>value</strong>: The bean name of the executor.
The executor is identified with this value by StackSaga engine. after configuring the bean name, it cannot be changed at all. if you want to the class package, it does not matter without changing the configured name.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><strong>RevertAfterExecutor&lt;A, E&gt;</strong>: The Revert After Executor should be implemented from the <code>RevertAfterExecutor&lt;A,E&gt;</code>.
Generic <strong>A</strong> is the aggregator.
Generic <strong>E</strong> is the <a href="#command_executor">command-executor</a> of the given aggregator as the Generic <strong>A</strong>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Override the <code>doProcess()</code> method that <code>RevertAfterExecutor</code> provides.
That is the method is executed by the StackSaga engine.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td><strong>PlaceOrderAggregator</strong>: The final aggregator state when the process exception is thrown.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td><strong>ProcessStack</strong>: The final process stack when the process exception is thrown.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td><strong>NonRetryableExecutorException</strong>:The process-exception that was thrown by the last executor.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td><strong>RevertHintStore</strong> If you want to add some data to the backward process, you can use the <code>RevertHintStore</code> to put the data as container.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td><strong>RevertAfterStepManagerUtil&lt;A, E&gt;</strong>: This object provides the methods for giving the navigation to the engine regarding the next step. it can be another revert-after-executor or a revert-after completion.</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td><strong>RetryableExecutorException</strong>: If the revert after execution is failed due to a retryable exception, you can provide that by warping with <code>RetryableExecutorException</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="13"></i><b>13</b></td>
<td><strong>next()</strong>: You can provide (only if you have) the next revert-after-executor with <code>revertStepManagerUtil.next()</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="14"></i><b>14</b></td>
<td><strong>complete()</strong>: If you don&#8217;t have any revert-after-executor to be executed as next regarding the command-executor, you can return <code>revertStepManagerUtil.complete()</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_processstack">ProcessStack</h3>

</div>
<div class="sect2">
<h3 id="retryable_executor_exception">RetryableExecutorException</h3>
<div class="paragraph">
<p>If you are having an exception while processing the executor due to a connection issue or that kind of re-invokable error (The exceptions that can be occurred temporarily), you can throw a <code>RetryableExecutorException</code>.
Then the StackSaga engine will temporarily pause the execution, and the transaction does expose to the next scheduler.
Because, the engine knows that even though the executor has an exception at this moment, the execution can be retried and run again successfully due to the retractable error.
IF you were unable to catch the exception properly, the execution might throw <code>RuntimeException</code> s.
That kind of unhandled exception will be caught as non-retryable exception by the StackSaga engine.
IF the exception is a <strong>non-retryable</strong> error, you can throw it by warping with <a href="#non_retryable_executor_exception"><code>NonRetryableExecutorException</code></a>.</p>
</div>
<div class="paragraph">
<p><strong>Retryable Executor Exceptions</strong> are allowed for the following executors.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Executor</th>
<th class="tableblock halign-left valign-top">DoProcess() Method</th>
<th class="tableblock halign-left valign-top">doRevert() Method</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Executor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command Executor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Revert Before Executor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Revert After Executor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
It is very important to identify whether the exception is a retryable exception or not.
If you don&#8217;t identify the exceptions that are thrown when the execution is executed every time that an exception is thrown, the transaction will be stopped to forward.
Therefore, it is necessary to capture and identify all the exceptions that are thrown inside the <code>doProcess()</code> method.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><span style="color:#007">@SagaExecutor</span>(
        executeFor = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">user-service</span><span style="color:#710">&quot;</span></span>,
        liveCheck = <span style="color:#069">true</span>,
        value = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">CheckUserExecutor</span><span style="color:#710">&quot;</span></span>
)
<span style="color:#007">@AllArgsConstructor</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">CheckUserExecutor</span> <span style="color:#088;font-weight:bold">implements</span> QueryExecutor&lt;PlaceOrderAggregator&gt; {

    <span style="color:#088;font-weight:bold">private</span> <span style="color:#088;font-weight:bold">final</span> UserService userService;
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> ProcessStepManager&lt;PlaceOrderAggregator&gt; doProcess(
            ProcessStack processStack,
            PlaceOrderAggregator aggregator,
            ProcessStepManagerUtil&lt;PlaceOrderAggregator&gt; stepManagerUtil
    ) <span style="color:#088;font-weight:bold">throws</span> RetryableExecutorException, NonRetryableExecutorException {

        <span style="color:#080;font-weight:bold">try</span> {

            ResponseEntity&lt;UserDetailDto&gt; userDetail = <span style="color:#950">this</span>.userService.getUserDetail(aggregator.getUsername());
            ...
        } <span style="color:#080;font-weight:bold">catch</span> (FeignException.ServiceUnavailable unavailableException) {
            <span style="color:#080;font-weight:bold">throw</span> RetryableExecutorException.buildWith(unavailableException).build();
        }
    }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="non_retryable_executor_exception">NonRetryableExecutorException</h3>
<div class="paragraph">
<p>If you are having an exception while processing the executor that is not temporally occurred (The exceptions that have not any point of executing again), you can throw a <code>NonRetryableExecutorException</code>.
Then the StackSaga engine will stop the execution forward, and start reverting back, according to the configuration.</p>
</div>
<div class="paragraph">
<p>IF you were unable to catch the exception properly, the execution might throw <code>RuntimeException</code> s.
That kind of unhandled exception will be caught as <strong>non-retryable</strong> exception by the StackSaga engine as well.
But if you want to have proper error handling, you have to catch exceptions properly.</p>
</div>
<div class="paragraph">
<p><strong>Non-Retryable Executor Exceptions</strong> are allowed for the following executors.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Executor</th>
<th class="tableblock halign-left valign-top">DoProcess() Method</th>
<th class="tableblock halign-left valign-top">doRevert() Method</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Executor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command Executor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Revert Before Executor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Revert After Executor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can see in the summary table, all the revert executions are not allowed <code>NonRetryableExecutorException</code> s.
The reason for that is according to the StackSaga architecture, any <strong>command-execution</strong> can have revert execution (compensation execution).
But all the <strong>revert-executions</strong> can have retryable-exception only.
Because, even though the process can be failed, the revert execution cannot be failed at all.
If the process is failed, there is a revert execution to have a compensation.
But if the revert is failed, there are any other executions to have compensation for the reverting fail.<br>
<strong>The summary is that only forward execution can have non-retryable-exception.</strong>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><span style="color:#007">@SagaExecutor</span>(
        executeFor = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">user-service</span><span style="color:#710">&quot;</span></span>,
        liveCheck = <span style="color:#069">true</span>,
        value = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">CheckUserExecutor</span><span style="color:#710">&quot;</span></span>
)
<span style="color:#007">@AllArgsConstructor</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">CheckUserExecutor</span> <span style="color:#088;font-weight:bold">implements</span> QueryExecutor&lt;PlaceOrderAggregator&gt; {

    <span style="color:#088;font-weight:bold">private</span> <span style="color:#088;font-weight:bold">final</span> UserService userService;

    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> ProcessStepManager&lt;PlaceOrderAggregator&gt; doProcess(
            ProcessStack processStack,
            PlaceOrderAggregator aggregator,
            ProcessStepManagerUtil&lt;PlaceOrderAggregator&gt; stepManagerUtil
    ) <span style="color:#088;font-weight:bold">throws</span> RetryableExecutorException, NonRetryableExecutorException {

        <span style="color:#080;font-weight:bold">try</span> {

            ResponseEntity&lt;UserDetailDto&gt; userDetail = <span style="color:#950">this</span>.userService.getUserDetail(aggregator.getUsername());
            ...
        } <span style="color:#080;font-weight:bold">catch</span> (FeignException.ServiceUnavailable unavailableException) {
            <span style="color:#080;font-weight:bold">throw</span> RetryableExecutorException
                    .buildWith(unavailableException)
                    .build();
        } <span style="color:#080;font-weight:bold">catch</span> (FeignException.BadRequest badRequestException) {
            <i class="conum" data-value="1"></i><b>(1)</b>
            <span style="color:#080;font-weight:bold">throw</span> NonRetryableExecutorException
                    .buildWith(badRequestException)
                    .put(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">time</span><span style="color:#710">&quot;</span></span>, LocalDateTime.now())  <i class="conum" data-value="2"></i><b>(2)</b>
                    .put(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">reason</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">BadRequest</span><span style="color:#710">&quot;</span></span>) <i class="conum" data-value="2"></i><b>(2)</b>
                    ...
                    .build();
        }
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><strong>NonRetryableExecutorException</strong> is thrown due to the exception is a <code>BadRequest</code>. specially <code>NonRetryableExecutorException</code> provides a way to add the metadata regarding the exception.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Put the metadata regarding exception as a key and value.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In java, we usually pass the data regarding the exception with the exception object.
But in the StackSaga it is <strong>not recommended</strong>.
Because, any time any object can be serialized (even Exceptions) for saving to the event-store.
Serializing an exception object (like Json or XML) is not easy, and it might be a performance issue without any benefit.
And also most of the time if you pass a complex exception, it might throw an exception when it is serialized.
Therefore, StackSaga engine just saves your exception as a string in the event-store(Only for seeing through the Admin-Dashboard).
If you want to put some metadata to the backward regarding the exception,
<strong>NonRetryableExecutorException</strong> has a method to put the data as key and value pare called <code>put(key, value)</code>.
You can put any number of key/value pare into that by using the put method.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
There is nothing like you can throw an exception when some exception is occurred.
If you don&#8217;t want to continue the execution of the transaction to forward, and if you decide that the transaction should be stopped at some point, due to a condition is not met, you can throw a <strong>NonRetryableExecutorException</strong> exception as well.
<a href="#usage_of_exceptions">See the full implementation</a>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="saga_exception_annotation">@SagaException Annotation </h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><span style="color:#007">@SagaException</span>(name = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">UserInactiveException</span><span style="color:#710">&quot;</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">UserInactiveException</span> <span style="color:#088;font-weight:bold">extends</span> <span style="color:#C00;font-weight:bold">RuntimeException</span> {
    <span style="color:#088;font-weight:bold">public</span> UserInactiveException() {
    }

    <span style="color:#088;font-weight:bold">public</span> UserInactiveException(<span style="color:#0a8;font-weight:bold">String</span> message) {
        <span style="color:#950">super</span>(message);
    }

    <span style="color:#088;font-weight:bold">public</span> UserInactiveException(<span style="color:#0a8;font-weight:bold">String</span> message, <span style="color:#0a8;font-weight:bold">Throwable</span> cause) {
        <span style="color:#950">super</span>(message, cause);
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>According to the example, the executor will throw and exception if the user is inactive.
Therefore, a new exception class is created.
And also if you think the package if the execution class will be changed in some cases in the future, you can set a fixed name for the exception.
By annotating <code>@SagaException</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="usage_of_exceptions">Usage of Executors[Q&amp;C] With Exceptions </h3>
<div class="paragraph">
<p>Here you can see how you can handle the <strong>success</strong>,
<strong>failure</strong> and <strong>retryable</strong> scenario inside the <strong><a href="#query_executor">query-executor</a></strong> executor.
In the same way, you can handle all things in <strong><a href="#command_executor">command-executor</a></strong> as well.</p>
</div>
<div class="paragraph">
<p>Create your own exception annotating with <code><a href="#saga_exception_annotation">@SagaException</a></code>  class to handle to inactive user exception.</p>
</div>
<div class="paragraph">
<p>The executor gets the userdata from the user-service by calling another service.
Based on the return of the <code>userService.getUserDetail</code>  method, the next step is managed here.
If the user is in active mode, The current executor allows the next executor by providing the next executor that should be invoked to the StackSaga engine.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="java"><span style="color:#007">@SagaExecutor</span>(
        executeFor = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">user-service</span><span style="color:#710">&quot;</span></span>,
        liveCheck = <span style="color:#069">true</span>,
        value = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">CheckUserExecutor</span><span style="color:#710">&quot;</span></span>
)
<span style="color:#007">@AllArgsConstructor</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">CheckUserExecutor</span> <span style="color:#088;font-weight:bold">implements</span> QueryExecutor&lt;PlaceOrderAggregator&gt; {

    <span style="color:#088;font-weight:bold">private</span> <span style="color:#088;font-weight:bold">final</span> UserService userService;

    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> ProcessStepManager&lt;PlaceOrderAggregator&gt; doProcess(
            ProcessStack processStack,
            PlaceOrderAggregator aggregator,
            ProcessStepManagerUtil&lt;PlaceOrderAggregator&gt; stepManagerUtil
    ) <span style="color:#088;font-weight:bold">throws</span> RetryableExecutorException, NonRetryableExecutorException {

        <span style="color:#080;font-weight:bold">try</span> {
            ResponseEntity&lt;UserDetailDto&gt; userDetail = <span style="color:#950">this</span>.userService.getUserDetail(aggregator.getUsername());
            <span style="color:#080;font-weight:bold">if</span> (userDetail.getBody().getIsActive() == <span style="color:#00D">1</span>) {
                <span style="color:#080;font-weight:bold">return</span> stepManagerUtil.next(DispatchOrderExecutor.class); <i class="conum" data-value="1"></i><b>(1)</b>
            } <span style="color:#080;font-weight:bold">else</span> {
                UserInactiveException inactiveException = <span style="color:#080;font-weight:bold">new</span> UserInactiveException(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">User is not active!</span><span style="color:#710">&quot;</span></span>); <i class="conum" data-value="2"></i><b>(2)</b>
                <span style="color:#080;font-weight:bold">throw</span> NonRetryableExecutorException
                        .buildWith(inactiveException)
                        .build();
            }
        } <span style="color:#080;font-weight:bold">catch</span> (FeignException.ServiceUnavailable unavailableException) {
            <span style="color:#080;font-weight:bold">throw</span> RetryableExecutorException
                    .buildWith(unavailableException)
                    .build(); <i class="conum" data-value="3"></i><b>(3)</b>
        } <span style="color:#080;font-weight:bold">catch</span> (FeignException.BadRequest badRequestException) {
            <span style="color:#080;font-weight:bold">throw</span> NonRetryableExecutorException
                    .buildWith(badRequestException)
                    .put(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">test</span><span style="color:#710">&quot;</span></span>, LocalDateTime.now())
                    .put(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">reason</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">BadRequest</span><span style="color:#710">&quot;</span></span>)
                    .build(); <i class="conum" data-value="4"></i><b>(4)</b>
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><strong>Success scenario</strong>:
If the user is active, the next executor will be provided to the engine by using <code>stepManagerUtil.next()</code> method.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><strong>Failed scenario</strong>:
IF the user is inactive, the process is stopped to forward by throwing <code>NonRetryableExecutorException</code> with <code>UserInactiveException</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><strong>Failed scenario</strong>:
IF the <code>userService.getUserDetail()</code> service throw a <code>FeignException.BadRequest</code> exception, the process is stopped to forward by throwing <code>NonRetryableExecutorException</code> with <code>FeignException.BadRequest</code> that occurred.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><strong>Retryable scenario</strong>
IF the <code>userService.getUserDetail()</code> service throw a <code>FeignException.ServiceUnavailable</code> exception, the process is stopped temporally by throwing <code>NonRetryableExecutorException</code> with <code>FeignException.ServiceUnavailable</code> that occurred.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_reverthintstore">RevertHintStore</h3>

</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-08-22 20:28:50 +0530
</div>
</div>
</body>
</html>