<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Aggregator Introduction</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect2">
<h3 id="_aggregator_introduction">Aggregator Introduction</h3>
<div class="paragraph">
<p>Here we are going to discuss how we can create an Aggregator and what are the configurations of the Aggregator.</p>
</div>
</div>
<div class="sect2">
<h3 id="creating_aggregator_class">Creating Aggregator Class</h3>
<div class="paragraph">
<p>The aggregator<sup><a href="#aggregator_architecture">ref</a></sup>  class does represent your business domain, and it is the container for carrying out the data for the executors.
In side of the aggregator class, you should provide all the data regarding your entire transaction.</p>
</div>
<div class="paragraph">
<p>example: Just think you are will be to make a transaction for place and order by using StackSaga. then you have to create an Aggregator class to put the data that you want to while the whole process. you can create an Aggregator class called <code>PlaceOrderAggregator</code> and provide all the data that you want like <em>username, orderId, transactionId</em> etc&#8230;&#8203; and also you might want to add complex data structure inside that aggregate class like <em>list of items</em> regarding the items that the customer&#8217;s order. then you have to create a java pojo as well. as a best practice, the framework suggests you to create all related pojo classes in the same package of the Aggregator class or as the inner classes of the Aggregator class.</p>
</div>
<div class="paragraph">
<p>To be an aggregator in StackSaga, Mainly, The aggregator class should be extended from <code>org.stacksaga.SagaAggregate</code> class and also the aggregator class should be annotated with <code>org.stacksaga.core.annotation.Aggregator</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
All the classes (main aggregator class and other classes that are used inside it) that are used for the SagaAggregator should be implemented by the <code>java.io.Serializable</code> class.
By default, The main aggregator class is Serializable due to the fact that it is implemented from the <code>SagaAggregate</code> class. <a href="#complex_aggrgator">See complex object implementation</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s see how it is created in StackSaga project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@Aggregator</span>(// <b class="conum">(1)</b>
        version = <span style="color:#007">@AggregatorVersion</span>(major = <span style="color:#00D">1</span>, minor = <span style="color:#00D">0</span>, patch = <span style="color:#00D">1</span>), // <b class="conum">(2)</b>
        idPrefix = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">po</span><span style="color:#710">&quot;</span></span>, // <b class="conum">(3)</b>
        name = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">PlaceOrderAggregator</span><span style="color:#710">&quot;</span></span>, // <b class="conum">(4)</b>
        sagaSerializable = PlaceOrderAggregatorSample.class // <b class="conum">(5)</b>
)
<span style="color:#007">@Getter</span> // <b class="conum">(6)</b>
<span style="color:#007">@Setter</span> // <b class="conum">(7)</b>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">PlaceOrderAggregator</span> <span style="color:#088;font-weight:bold">extends</span> SagaAggregate  { // <b class="conum">(8)</b>

    // <b class="conum">(9)</b>
    <span style="color:#088;font-weight:bold">public</span> PlaceOrderAggregator() {
        <span style="color:#950">super</span>(PlaceOrderAggregator.class);
    }

    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> orderId;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> username;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">int</span> isActive;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The aggregator class should be annotated with <code>org.stacksaga.core.annotation.Aggregator</code>.</p>
</li>
<li>
<p><strong>version</strong> will be used for the identification of the aggregator versioning. it is helpful for the <strong>event-upper-casting</strong> and <strong>event-down-casting</strong>. <code>org.stacksaga.core.annotation.AggregatorVersion</code> annotation help you to provide the version of the aggregator.</p>
</li>
<li>
<p><strong>idPrefix</strong> will be used as the prefix of the transaction id. you can give a prefix according to the aggregator name.
The maximum length of the prefix is 4 characters.</p>
</li>
<li>
<p><strong>name</strong> The name of the aggregator. this is used for identification of the aggregator by the name.</p>
</li>
<li>
<p><strong>sagaSerializable</strong> is used for pre-serialization of the samples of the aggregator. <a href="#saga_serializable">see the implementation</a></p>
</li>
<li>
<p><strong>Getter</strong> you can create getters as usual for the aggregator.</p>
</li>
<li>
<p><strong>Setter</strong> you can create setters as usual for the aggregator.</p>
</li>
<li>
<p>The aggregator class should be implemented from the <code>org.stacksaga.SagaAggregate</code> class.
It provides the shep of aggregator in the framework.</p>
</li>
<li>
<p>The aggregator class should have the default constructor and also the <strong>super()</strong> method should be called by passing the same aggregator class.</p>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
The name of the aggregator should be the same forever.
Because, all the event-store data is mapped with the aggregator name.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Due to the fact that the aggregator name is configured by an attribute, you can change the package of the aggregator class anytime.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In StackSaga, The aggregator is not a spring bean at all.
Therefore, it is not necessary to have inside the <strong>component scan</strong> area.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="saga_serializable">Creating SagaSerializable Class for Aggregator</h3>
<div class="paragraph">
<p>The <code>SagaSerializable</code> class provides you a method called <code>&lt;T&gt; getSamples()</code> to provide the sample array of objects of your real Aggregator. for each aggregator class that you made should have a separate implementation of <code>SagaSerializable</code> for validating the sample object before the application is started. that process ensures that your aggregator object will not face a serialization error while the transactions are being processed in the production.</p>
</div>
<div class="paragraph">
<p>you can see a sample SagaSerializable <code>(PlaceOrderAggregatorSample.class)</code> implementation of the PlaceOrderAggregator.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">PlaceOrderAggregatorSample</span> <span style="color:#088;font-weight:bold">implements</span> SagaSerializable&lt;PlaceOrderAggregator&gt; { //<b class="conum">(1)</b>
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> PlaceOrderAggregator<span style="color:#339;font-weight:bold">[]</span> getSamples() {
        <span style="color:#777">//samples objects for the PlaceOrderAggregator</span>

        <span style="color:#777">//sample-1</span>
        PlaceOrderAggregator aggregator1 = <span style="color:#080;font-weight:bold">new</span> PlaceOrderAggregator();
        aggregator1.setOrderId(<span style="color:#0a8;font-weight:bold">UUID</span>.randomUUID().toString());

        <span style="color:#777">//sample-1</span>
        PlaceOrderAggregator aggregator2 = <span style="color:#080;font-weight:bold">new</span> PlaceOrderAggregator();
        aggregator2.setOrderId(<span style="color:#0a8;font-weight:bold">UUID</span>.randomUUID().toString());
        aggregator2.setUsername(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mafei</span><span style="color:#710">&quot;</span></span>);

        //<b class="conum">(2)</b>
        <span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">new</span> PlaceOrderAggregator<span style="color:#339;font-weight:bold">[]</span>{
                aggregator1,
                aggregator2,
        };
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Implement your custom <code>PlaceOrderAggregatorSample</code> from the <code>SagaSerializable&lt;T&gt;</code>.
The generic type should be the aggregator that you wish to check the sample object.
According to the example, the Type is <code>PlaceOrderAggregator</code>.
Then you will have a method for providing the sample objects for that given type.</p>
</li>
<li>
<p>Rerun your initialized sample objects by creating a new array for the validation process.</p>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Make sure to keep the default constructor for each SagaSerializable implementation.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="aggregator_mapper_implementation">Aggregator Mapper Implementation</h3>

</div>
<div class="sect2">
<h3 id="complex_aggrgator">Full Aggregate implementation.</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#777">//Aggregtor Classs</span>
<span style="color:#007">@Aggregator</span>(
        version = <span style="color:#007">@AggregatorVersion</span>(major = <span style="color:#00D">1</span>, minor = <span style="color:#00D">0</span>, patch = <span style="color:#00D">1</span>),
        idPrefix = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">po</span><span style="color:#710">&quot;</span></span>,
        name = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">PlaceOrderAggregator</span><span style="color:#710">&quot;</span></span>,
        sagaSerializable = PlaceOrderAggregatorSample.class
)
<span style="color:#007">@Getter</span>
<span style="color:#007">@Setter</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">PlaceOrderAggregator</span> <span style="color:#088;font-weight:bold">extends</span> SagaAggregate {

    <span style="color:#088;font-weight:bold">public</span> PlaceOrderAggregator() {
        <span style="color:#950">super</span>(PlaceOrderAggregator.class);
    }

    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> orderId;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> username;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">int</span> isActive;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">List</span>&lt;ItemDetail&gt; itemDetails = <span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">ArrayList</span>&lt;&gt;();
}

<span style="color:#777">//Pojo Class for Item Details</span>
<span style="color:#007">@Getter</span>
<span style="color:#007">@Setter</span>
<span style="color:#007">@Builder</span>
<span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">ItemDetail</span> <span style="color:#088;font-weight:bold">implements</span> <span style="color:#0a8;font-weight:bold">Serializable</span> { //<b class="conum">(1)</b>
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#0a8;font-weight:bold">String</span> itemName;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">int</span> qty;
    <span style="color:#088;font-weight:bold">private</span> <span style="color:#339;font-weight:bold">double</span> price;
}

<span style="color:#777">//Saga Serializable Class</span>
<span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">PlaceOrderAggregatorSample</span> <span style="color:#088;font-weight:bold">implements</span> SagaSerializable&lt;PlaceOrderAggregator&gt; {
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> PlaceOrderAggregator<span style="color:#339;font-weight:bold">[]</span> getSamples() {
        <span style="color:#777">//sample-1</span>
        PlaceOrderAggregator aggregator1 = <span style="color:#080;font-weight:bold">new</span> PlaceOrderAggregator();
        aggregator1.setOrderId(<span style="color:#0a8;font-weight:bold">UUID</span>.randomUUID().toString());
        <span style="color:#777">//sample-1</span>
        PlaceOrderAggregator aggregator2 = <span style="color:#080;font-weight:bold">new</span> PlaceOrderAggregator();
        aggregator2.setOrderId(<span style="color:#0a8;font-weight:bold">UUID</span>.randomUUID().toString());
        aggregator2.setUsername(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">mafei</span><span style="color:#710">&quot;</span></span>);
        <span style="color:#777">//sample-3</span>
        PlaceOrderAggregator aggregator3 = <span style="color:#080;font-weight:bold">new</span> PlaceOrderAggregator();
        aggregator3.getItemDetails().add(
                ItemDetail
                        .builder()
                        .itemName(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Item-01</span><span style="color:#710">&quot;</span></span>)
                        .price(<span style="color:#60E">10.50</span>)
                        .qty(<span style="color:#00D">2</span>)
                        .build()
        );

        <span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">new</span> PlaceOrderAggregator<span style="color:#339;font-weight:bold">[]</span>{
                aggregator1,
                aggregator2,
                aggregator3,
        };
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>It is necessary to be implemented by the  <code>Serializable</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="saga_executors">Saga Executors.</h3>
<div class="paragraph">
<p>According to the saga design pattern, sub processes (atomic executions) can have two executions called process execution and compensation execution.
And those executions you van create as the methods in your application anywhere.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong><a href="#query_executor">Query executors</a></strong>: If some atomic process has no compensation (query execution), that kind of process is used in a query executor.</p>
</li>
<li>
<p><strong><a href="#command_executor">Command executors</a></strong>: If some atomic process has a compensation (command execution), that kind of process is used in a command executor.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Revert executors</strong>: For the compensation process of the command executor it can be used other sub processes if you need.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><strong><a href="#revert_before_executor">Revert Before Executors</a></strong>: If you want to execute an atomic process before executing the main revert process, you can create a Revert-Before-Executor.</p>
</li>
<li>
<p><strong><a href="#revert_after_executor">Revert After Executors</a></strong>: If you want to execute an atomic process after executing the main revert process, you can create a Revert-Before-Executor.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="query_executor">Query Executor.</h3>
<div class="paragraph">
<p>You can create any number of your custom Query-Executors regarding the Aggregator.
Here you can see how you can create a Query-Executor for your <code><a href="#creating_aggregator_class">PlaceOrderAggregator</a></code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">// <b class="conum">(1)</b>
<span style="color:#007">@SagaExecutor</span>(
        executeFor = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">user-service</span><span style="color:#710">&quot;</span></span>, // <b class="conum">(2)</b>
        liveCheck = <span style="color:#069">true</span>, // <b class="conum">(3)</b>
        value = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">CheckUserExecutor</span><span style="color:#710">&quot;</span></span> // <b class="conum">(4)</b>
)
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">CheckUserExecutor</span> <span style="color:#088;font-weight:bold">implements</span> QueryExecutor&lt;PlaceOrderAggregator&gt; { // <b class="conum">(5)</b>

    // <b class="conum">(6)</b>
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> ProcessStepManager&lt;PlaceOrderAggregator&gt; doProcess(
            ProcessStack processStack,
            PlaceOrderAggregator aggregator,
            ProcessStepManagerUtil&lt;PlaceOrderAggregator&gt; stepManagerUtil
    ) <span style="color:#088;font-weight:bold">throws</span> RetryableExecutorException, NonRetryableExecutorException {
        <span style="color:#777">//execute the service and check the conndtion.</span>

        <span style="color:#777">//return or throw </span>// <b class="conum">(7)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><strong>@SagaExecutor</strong>: annotate your query executor with <code>@org.stacksaga.annotation.SagaExecutor</code> annotation.
The annotation provides the spring bean capabilities and also another metadata for the StackSaga framework.</p>
</li>
<li>
<p><strong>executeFor</strong>: The name of the service that particular executor is going to be connected. it can be a service name of another service. if the service is spring boot service, make sure to keep the application name as its. because it will be helpful for the retry process.</p>
</li>
<li>
<p><strong>liveCheck</strong>: When the retry process is executed, liveCheck is considered by the engine. if the target service is a spring boot service or registered service with the service registry, the availability is checked before executing the retry by the StackSaga engine.</p>
</li>
<li>
<p><strong>value</strong>: The bean name of the executor.
The executor is identified with this value by StackSaga engine. after configuring the bean name, it cannot be changed at all. if you want to the class package, it does not matter without changing the configured name.</p>
</li>
<li>
<p><strong>QueryExecutor&lt;T&gt;</strong> IF the executor is Query one, The executor should be implemented by <code>org.stacksaga.executor.QueryExecutor&lt;T&gt;</code>. <code>T</code> should be the target Aggregator class for the domain.</p>
</li>
<li>
<p>Override the <code>doProcess()</code>  method and put your execution code block that should be executed when the executor is executed by the StackSaga engine.</p>
</li>
<li>
<p>Finally, you can either return the next executor with the method that provides by the <code>ProcessStepManager</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="command_executor">Command Executor.</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">// <b class="conum">(1)</b>
<span style="color:#007">@SagaExecutor</span>(
        executeFor = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">delivery-service</span><span style="color:#710">&quot;</span></span>, // <b class="conum">(2)</b>
        liveCheck = <span style="color:#069">true</span>, // <b class="conum">(3)</b>
        value = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">DispatchOrderExecutor</span><span style="color:#710">&quot;</span></span> // <b class="conum">(4)</b>
)
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">DispatchOrderExecutor</span> <span style="color:#088;font-weight:bold">implements</span> CommandExecutor&lt;PlaceOrderAggregator&gt; { // <b class="conum">(5)</b>

    // <b class="conum">(6)</b>
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> ProcessStepManager&lt;PlaceOrderAggregator&gt; doProcess(
            ProcessStack processStack, // <b class="conum">(7)</b>
            PlaceOrderAggregator aggregator, // <b class="conum">(8)</b>
            ProcessStepManagerUtil&lt;PlaceOrderAggregator&gt; stepManager // <b class="conum">(9)</b>
    ) <span style="color:#088;font-weight:bold">throws</span> RetryableExecutorException, NonRetryableExecutorException {
        <span style="color:#777">//execute the service and check the conndtion.</span>
        ...
        <span style="color:#777">//return or throw </span>// <b class="conum">(10)</b>
    }

    <span style="color:#007">@RevertBefore</span>(startFrom = DispatchRevertNotifierExecutor.class)  // <b class="conum">(11)</b>
    <span style="color:#007">@RevertAfter</span>(startFrom = DispatchRevertCompleteLogExecutor.class) // <b class="conum">(12)</b>
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> doRevert(
            ProcessStack processStack,// <b class="conum">(13)</b>
            NonRetryableExecutorException nonRetryableExecutorException,// <b class="conum">(14)</b>
            PlaceOrderAggregator aggregator, // <b class="conum">(15)</b>
            RevertHintStore revertHintStore // <b class="conum">(16)</b>
    ) <span style="color:#088;font-weight:bold">throws</span> RetryableExecutorException {
        <span style="color:#777">//call the atomic process that you want to as the compensation,</span>
        ...
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><strong>@SagaExecutor</strong>: annotate your query executor with <code>@org.stacksaga.annotation.SagaExecutor</code> annotation.
The annotation provides the spring bean capabilities and also another metadata for the StackSaga framework.</p>
</li>
<li>
<p><strong>executeFor</strong>: The name of the service that particular executor is going to be connected. it can be a service name of another service. if the service is spring boot service, make sure to keep the application name as its. because it will be helpful for the retry process.</p>
</li>
<li>
<p><strong>liveCheck</strong>: When the retry process is executed, liveCheck is considered by the engine. if the target service is a spring boot service or registered service with the service registry, the availability is checked before executing the retry by the StackSaga engine.</p>
</li>
<li>
<p><strong>value</strong>: The bean name of the executor.
The executor is identified with this value by StackSaga engine. after configuring the bean name, it cannot be changed at all. if you want to the class package, it does not matter without changing the configured name.</p>
</li>
<li>
<p><strong>CommandExecutor&lt;T&gt;</strong> IF the executor is command one, The executor should be implemented by <code>org.stacksaga.executor.CommandExecutor&lt;T&gt;</code>. <code>T</code> should be the target Aggregator class for the domain.</p>
</li>
<li>
<p>Override the <code>doProcess()</code>  method and put your execution code block that should be executed when the executor is executed by the StackSaga engine.</p>
</li>
<li>
<p><strong>ProcessStack</strong> Object provides all the executed execution until the process so far.
It will help for gen an idea about the execution history.
And also you can get the decision of the execution base on the execution history.</p>
</li>
<li>
<p><strong>PlaceOrderAggregator</strong>: The current aggregator state.</p>
</li>
<li>
<p><strong>ProcessStepManagerUtil&lt;T&gt;</strong>: This object provides the methods for giving the navigation to the engine regarding the next step. it can be another executor (command or query) or a process completion.</p>
</li>
<li>
<p>Inside the method scope, you can provide the execution that should be executed when the StackSaga engine executes.
And finally you can navigate to the next step by using the <code>ProcessStepManagerUtil</code> object.</p>
</li>
<li>
<p><strong>@RevertBefore</strong>: If the executor has any revert-before-executors, you can mention that executor class with <code>@RevertBefore</code> annotation.
According to the example, the revert before execution will be started from <a href="#revert_before_executor">DispatchRevertNotifierExecutor</a>.</p>
</li>
<li>
<p><strong>@RevertAfter</strong>: If the executor has any revert-after-executors, you can mention that executor class with <code>@RevertAfter</code> annotation.
According to the example, the revert after execution will be started from <a href="#revert_after_executor">DispatchRevertCompleteLogExecutor</a>.</p>
</li>
<li>
<p><strong>ProcessStack</strong> The final process stack that was when the final execution was executed.</p>
</li>
<li>
<p><strong>NonRetryableExecutorException</strong> The exception that caused the transition process stopping to forward.</p>
</li>
<li>
<p><strong>PlaceOrderAggregator</strong> The final aggregator state when the NonRetryableExecutorException is thrown.</p>
</li>
<li>
<p><strong>RevertHintStore</strong> If you want to add some data to the backward process, you can use the <code>RevertHintStore</code> to put the data.</p>
</li>
</ol>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="revert_before_executor">Revert Before Executor.</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">//<b class="conum">(1)</b>
<span style="color:#007">@SagaExecutor</span>(
        executeFor = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">delivery-service</span><span style="color:#710">&quot;</span></span>,//<b class="conum">(2)</b>
        liveCheck = <span style="color:#069">true</span>,//<b class="conum">(3)</b>
        value = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">DispatchRevertNotifierExecutor</span><span style="color:#710">&quot;</span></span> //<b class="conum">(4)</b>
)
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">DispatchRevertNotifierExecutor</span> <span style="color:#088;font-weight:bold">implements</span> RevertBeforeExecutor&lt;PlaceOrderAggregator, DispatchOrderExecutor&gt; {//<b class="conum">(5)</b>

    //<b class="conum">(6)</b>
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> RevertBeforeStepManager&lt;PlaceOrderAggregator, DispatchOrderExecutor&gt; doProcess(
            PlaceOrderAggregator aggregator,//<b class="conum">(7)</b>
            ProcessStack previousProcessStack,//<b class="conum">(8)</b>
            NonRetryableExecutorException processException,//<b class="conum">(9)</b>
            RevertHintStore revertHintStore,//<b class="conum">(10)</b>
            RevertBeforeStepManagerUtil&lt;PlaceOrderAggregator, DispatchOrderExecutor&gt; revertStepManagerUtil //<b class="conum">(11)</b>
    ) <span style="color:#088;font-weight:bold">throws</span> RetryableExecutorException { //<b class="conum">(12)</b>
        <span style="color:#080;font-weight:bold">return</span> revertStepManagerUtil.next(NextBeforExecutor.class); //<b class="conum">(13)</b>
        <span style="color:#777">//or</span>
        <span style="color:#080;font-weight:bold">return</span> revertStepManagerUtil.complete(); //<b class="conum">(14)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><strong>@SagaExecutor</strong>: annotate your query executor with <code>@org.stacksaga.annotation.SagaExecutor</code> annotation.
The annotation provides the spring bean capabilities and also another metadata for the StackSaga framework.</p>
</li>
<li>
<p><strong>executeFor</strong>: The name of the service that particular executor is going to be connected. it can be a service name of another service. if the service is spring boot service, make sure to keep the application name as its. because it will be helpful for the retry process.</p>
</li>
<li>
<p><strong>liveCheck</strong>: When the retry process is executed, liveCheck is considered by the engine. if the target service is a spring boot service or registered service with the service registry, the availability is checked before executing the retry by the StackSaga engine.</p>
</li>
<li>
<p><strong>value</strong>: The bean name of the executor.
The executor is identified with this value by StackSaga engine. after configuring the bean name, it cannot be changed at all. if you want to the class package, it does not matter without changing the configured name.</p>
</li>
<li>
<p><strong>RevertBeforeExecutor&lt;A, E&gt;</strong>: The Revert Before Executor should be implemented from the <code>RevertBeforeExecutor&lt;A,E&gt;</code>.
Generic <strong>A</strong> is the aggregator.
Generic <strong>E</strong> is the <a href="#command_executor">command-executor</a> of the given aggregator as the Generic <strong>A</strong>.</p>
</li>
<li>
<p>Override the <code>doProcess()</code> method that <code>RevertBeforeExecutor</code> provides.
That is the method is executed by the StackSaga engine.</p>
</li>
<li>
<p><strong>PlaceOrderAggregator</strong>: The final aggregator state when the process exception is thrown.</p>
</li>
<li>
<p><strong>ProcessStack</strong>: The final process stack when the process exception is thrown.</p>
</li>
<li>
<p><strong>NonRetryableExecutorException</strong>:The process-exception that was thrown by the last executor.</p>
</li>
<li>
<p><strong>RevertHintStore</strong> If you want to add some data to the backward process, you can use the <code>RevertHintStore</code> to put the data as container.</p>
</li>
<li>
<p><strong>RevertBeforeStepManagerUtil&lt;A, E&gt;</strong>: This object provides the methods for giving the navigation to the engine regarding the next step. it can be another revert-before-executor or a revert-before completion.</p>
</li>
<li>
<p><strong>RetryableExecutorException</strong>: If the revert before execution is failed due to a retryable exception, you can provide that by warping with <code>RetryableExecutorException</code>.</p>
</li>
<li>
<p><strong>next()</strong>: You can provide (only if you have) the next revert-before-executor with <code>revertStepManagerUtil.next()</code>.</p>
</li>
<li>
<p><strong>complete()</strong>: If you don&#8217;t have any revert-before-executor to be executed as next regarding the command-executor, you can return <code>revertStepManagerUtil.complete()</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="revert_after_executor">Revert After Executor.</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">//<b class="conum">(1)</b>
<span style="color:#007">@SagaExecutor</span>(
        executeFor = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">delivery-service</span><span style="color:#710">&quot;</span></span>,//<b class="conum">(2)</b>
        liveCheck = <span style="color:#069">true</span>,//<b class="conum">(3)</b>
        value = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">DispatchRevertNotifierExecutor</span><span style="color:#710">&quot;</span></span> //<b class="conum">(4)</b>
)
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">DispatchRevertCompleteLogExecutor</span> <span style="color:#088;font-weight:bold">implements</span> RevertAfterExecutor&lt;PlaceOrderAggregator, DispatchOrderExecutor&gt; {//<b class="conum">(5)</b>

    //<b class="conum">(6)</b>
    <span style="color:#007">@Override</span>
    <span style="color:#088;font-weight:bold">public</span> RevertAfterStepManager&lt;PlaceOrderAggregator, DispatchOrderExecutor&gt; doProcess(
            PlaceOrderAggregator aggregator,//<b class="conum">(7)</b>
            ProcessStack previousProcessStack,//<b class="conum">(8)</b>
            NonRetryableExecutorException processException,//<b class="conum">(9)</b>
            RevertHintStore revertHintStore,//<b class="conum">(10)</b>
            RevertAfterStepManagerUtil&lt;PlaceOrderAggregator, DispatchOrderExecutor&gt; revertStepManagerUtil //<b class="conum">(11)</b>
    ) <span style="color:#088;font-weight:bold">throws</span> RetryableExecutorException { //<b class="conum">(12)</b>
        <span style="color:#080;font-weight:bold">return</span> revertStepManagerUtil.next(NextAfterExecutor.class); //<b class="conum">(13)</b>
        <span style="color:#777">//or</span>
        <span style="color:#080;font-weight:bold">return</span> revertStepManagerUtil.complete(); //<b class="conum">(14)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><strong>@SagaExecutor</strong>: annotate your query executor with <code>@org.stacksaga.annotation.SagaExecutor</code> annotation.
The annotation provides the spring bean capabilities and also another metadata for the StackSaga framework.</p>
</li>
<li>
<p><strong>executeFor</strong>: The name of the service that particular executor is going to be connected. it can be a service name of another service. if the service is spring boot service, make sure to keep the application name as its. because it will be helpful for the retry process.</p>
</li>
<li>
<p><strong>liveCheck</strong>: When the retry process is executed, liveCheck is considered by the engine. if the target service is a spring boot service or registered service with the service registry, the availability is checked before executing the retry by the StackSaga engine.</p>
</li>
<li>
<p><strong>value</strong>: The bean name of the executor.
The executor is identified with this value by StackSaga engine. after configuring the bean name, it cannot be changed at all. if you want to the class package, it does not matter without changing the configured name.</p>
</li>
<li>
<p><strong>RevertAfterExecutor&lt;A, E&gt;</strong>: The Revert After Executor should be implemented from the <code>RevertAfterExecutor&lt;A,E&gt;</code>.
Generic <strong>A</strong> is the aggregator.
Generic <strong>E</strong> is the <a href="#command_executor">command-executor</a> of the given aggregator as the Generic <strong>A</strong>.</p>
</li>
<li>
<p>Override the <code>doProcess()</code> method that <code>RevertAfterExecutor</code> provides.
That is the method is executed by the StackSaga engine.</p>
</li>
<li>
<p><strong>PlaceOrderAggregator</strong>: The final aggregator state when the process exception is thrown.</p>
</li>
<li>
<p><strong>ProcessStack</strong>: The final process stack when the process exception is thrown.</p>
</li>
<li>
<p><strong>NonRetryableExecutorException</strong>:The process-exception that was thrown by the last executor.</p>
</li>
<li>
<p><strong>RevertHintStore</strong> If you want to add some data to the backward process, you can use the <code>RevertHintStore</code> to put the data as container.</p>
</li>
<li>
<p><strong>RevertAfterStepManagerUtil&lt;A, E&gt;</strong>: This object provides the methods for giving the navigation to the engine regarding the next step. it can be another revert-after-executor or a revert-after completion.</p>
</li>
<li>
<p><strong>RetryableExecutorException</strong>: If the revert after execution is failed due to a retryable exception, you can provide that by warping with <code>RetryableExecutorException</code>.</p>
</li>
<li>
<p><strong>next()</strong>: You can provide (only if you have) the next revert-after-executor with <code>revertStepManagerUtil.next()</code>.</p>
</li>
<li>
<p><strong>complete()</strong>: If you don&#8217;t have any revert-after-executor to be executed as next regarding the command-executor, you can return <code>revertStepManagerUtil.complete()</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_processstack">ProcessStack</h3>

</div>
<div class="sect2">
<h3 id="_nonretryableexecutorexception">NonRetryableExecutorException</h3>

</div>
<div class="sect2">
<h3 id="_reverthintstore">RevertHintStore</h3>

</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-08-21 22:56:24 +0530
</div>
</div>
</body>
</html>